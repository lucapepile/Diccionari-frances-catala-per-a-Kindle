# Diccionari-frances-catala-per-a-Kindle
Aquesta és una versió del diccionari francès català d'Enciclopèdia Catalana, utilitzable a Kindle. Està feta a partir de la versió en línia del mateix diccionari, a partir de la qual he construït la versió html del diccionari (_diccionari_complet.html_). A aquesta versió, juntament amb els criteris exigits per Amazon, hi he afegit tota la morfologia nominal i verbal mitjançant el lèxic d'àmplia cobertura _Morphalou 3.1_. Seguidament he afegit a la morfologia totes les combinacions possibles de les paraules arrel i derivades amb els apòstrofs, ja que Kindle, a diferència de com ho fa amb els guionets, no separa els apòstrofs de les paraules arrel a l'hora de fer les cerques al diccionari.
Finalment, he creat tots els fitxers necessaris per poder exportar el diccionari a un format .mobi, mitjançant Kindle Previewer. El fitxer resultant s'ha de copiar mitjançant USB a la carpeta _documents > dictionaries_ del Kindle.

**Els passos a seguir són els següents:**  
1) Descarrega tots els documents en una carpeta, juntament amb el .csv [Morphalou3.1_CSV.csv](https://www.ortolang.fr/market/lexicons/morphalou). El pots descarregar des d'aquest enllaç a "Téléchargement", descarregant el fitxer .zip amb totes les versions i escollint _"Morphalou3.1_formatCSV_toutEnUn.zip"_. Alternativament, també te'l pots descarregar des de la carpeta **resultats** d'aquest repositori.
2) Executa el codi _rastreja.py_. Aquest codi pentina les 4836 pàgines en línia del diccionari francès-català d'Enciclopèdia Catalana i extrau totes les entrades del diccionari en un fitxer que anomena _Diccionari_complet.html_, en el qual també afegeix diversos estils al cos de l'html, extrets dels originals de la pàgina web. El codi fa més d'una crida a la pàgina en cas que hi hagi algun error, però tenint en compte que ha de fer vora 5000 crides, en cas que alguna pàgina no es pugui extraure, quedarà registrada en un fitxer _errors.log_. Si el fitxer d'errors és buit, perfecte. En cas cotrari, caldrà executar el codi _reintentar_errors.py_, que torna a intentar extraure les entrades de les pàgines que no ha sigut possible.
3) Seguidament, executa el codi _deriva.py_, que transformarà el fitxer _Morphalou3.1_CSV.csv_ en un altre fitxer més funcional, anomenat _derivades.csv_, en què en una primera columna hi haurà les paraules arrel del _Morphalou_ i a les següents columnes totes les derivades. A més a més, el codi també afegirà a la fila de derivades totes les variants apostrofades possibles en francès per a la paraula arrel.
4) A continuació, executa el codi _partir_diccionari.py_, que partirà el fitxer _Diccionari_complet.html_ en 300 parts perquè sigui més manejable per al _Kindle Previewer_, al mateix temps que li donarà el format html que Amazon demana per als diccionaris i l'ordenarà alfabèticament. Es crearà una carpeta nova anomenada _parts_diccionari_, a la qual s'hi copiarà el fitxer _styles.css_, que, dintre d'uns determinats paràmetres, intenta mantenir el mateix format que la pàgina web dona al diccionari.
5) I finalment, executa el codi _derivar_parts.py_. Això comprova si les entrades del diccionari dels fitxers partits coincideixen amb les paraules arrel del fitxer _derivades.csv_; en cas afirmatiu, afegeix tota la morfologia necessària a cada paraula que apareix al diccionari, perquè Kindle ho pugui reconèixer.
6) A tall de comprovació, pots executar el codi _comprova_entrades.py_. Aquest codi compararà les entrades del fitxer _diccionari_complet.html_ i identificarà que siguin al fitxer _derivades.csv_. En el cas de les entrades que no hi siguin, les compilarà en un fitxer _entrades_no_trobades.txt_. Aquest fitxer tindrà un total de 4286 paraules, moltes de les quals noms propis i topònims (i per tant, escrites normalment en la forma singular), però no pas totes. Seran entrades de diccionari que no tindran derivació. Si algú s'anima a derivar-les, evidentment serà benvingut ;).
7) Ja per acabar, obre el fitxer dicc.opf des de _Kindle Previewer 3_. Quan tingui tots els documents html processats, exporta el contingut en un fitxer.mobi; aquest fitxer és el que s'ha de copiar a la carpeta _Diccionaris_ de Kindle.

Cal tindre el compte que els meus coneixements de programació són pràcticament nuls. Tot el codi ha estat escrit mitjançant IA. La meua feina, a base d'assaig error, ha consistit en ajustar-lo simplificant i ajustant al màxim les demandes al programador.

